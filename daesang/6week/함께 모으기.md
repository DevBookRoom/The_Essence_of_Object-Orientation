# [객체지향의 사실과 오해 chap7]

# 7. 함께 모으기

### # 도입

- 마틴파울러: 객체지향 설계 안에 3가지 관점 존재
  1. 개념 관점
     - 도메인 내 존재하는 개념 사이의 관계 표현.
     - 실제 도메인의 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심
  2. 명세 관점
     - 사용자 영역인 도메인을 벗어나 개발자 영역인 소프트웨어로 초점이 옮겨짐
     - 객체의 인터페이스를 구성하는 단계 -> 협력 설계
  3. 구현 관점
     - 코딩하는 단계

### # 커피 전문점 도메인

1. 카페에 어떤 객체가 있나 ?
   1. 손님 객체
   2. 메뉴판 객체
   3. 메뉴 항목 객체
   4. 바리스타 객체
   5. 아메리카노 객체
   6. 카푸치노 객체
   7. 에스프레소 객체
   8. 카라멜 마키아또 객체
2. 객체간 관계는 어떠한가?
   - 포함 or 합성 관계
   - 연관 관계

### # 설계하고 구현하기

**커피를 주문하기 위한 협력 찾기**

- 훌륭한 협력을 설계하기
  1. 메시지 먼저 선택
     - `커피 주문하라`
  2. 메시지를 송, 수신할 객체 선택하기
     - `수신: 손님`

**인터페이스 정리하기**

- 메시지로 인터페이스 정의
  - 손님: `주문하기`

```typescript
interface Customer {
  order(menuName: string, menu: Menu, barista: Barista): void;
}
```

**구현하기**

- 인터페이스 식별 후, 수행할 동작을 메서드로 구현.

```typescript
class CustomerA implements Customer {
  order(menuName, menu, barista) {
    const menuItem = menu.choose(memuName);
    const coffee = barista.makeCoffee(menuItem);
    // ...
  }
}
```

### # 코드와 세 가지 관점

**코드는 세 가지 관점을 모두 제공해야한다.**

- 개념 관점: 코드가 도메인 개념을 반영해야함.
- 명세 관점: 공용 인터페이스가 드러나야함.
- 구현 관점: 구현과 속성의 변경이 외부에 영향일 미치지 않아야함.

**도메인 개념을 참조하는 이유**

- 도메인 지식 기반으로 코드를 더 쉽게 이해할 수 있기 때문 -> 유지보수성에 영향 미침
- 변경에 유연하게 대응하기 위함.

**인터페이스와 구현을 분리하라**

- 명세 관점과 구현 관점이 뒤섞이지 않아야 안정적이다.
- 변경으로 인한 영향을 최소화하기 위함.
