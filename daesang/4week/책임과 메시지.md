# [객체지향의 사실과 오해 chap5]

# 4. 책임과 메시지

### # 도입

- 위급 상황 발생해도 역할과 책임이 모호하면 올바르게 행동하지 않음

### # 자율적인 책임

**설계의 품질을 좌우하는 책임**

- 자율적인 객체: 스스로 정한 원칙에 따라 행동하는 객체
  -> 설계 품질 결정
  **자신의 의지에 따라 증언할 수 있는 자유**
- 책임만 다하면 됨 (인터페이스)
- 방법은 스스로 선택 (구현체)
  **너무 추상적인 책임**
- 명확해야함
  **’어떻게’가 아니라 ‘무엇’을**
- ’무엇’ -> 책임 의미
- ’어떻게’ -> 방법 의미

### # 메시지와 메서드

**메시지**

- 메시지 전송 = 수신자 + 메시지
  - 메시지 = 메시지 이름 + 인자
- 송신자: 메시지 전송 통해서만 다른 객체의 책임 요청
- 수신자: 메시지 수신 통해서만 자신의 책임 수행
- 어떻게 처리할지는 자율적으로 선택

**메서드**

- 객체가 메시지를 처리하기 위해 내부적으로 선택하는 방법

**다형성**

- 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것
  - 메시지를 `어떻게` 처리할지는 수신자가 결정
  - ==메시지: 메서드 = 1 : N==
- 서로 다른 객체들이 다형성 만족
  -> 동일한 책임 공유
- 대체 가능성
  - 동일한 인터페이스를 가진 구현체를 갈아 끼우는 것
    -> 유연하고 재사용 가능한 설계 가능
- 다형성을 통해서 송신자가 수신자를 몰라도 메시지 전송 가능
  - 다형성은 수신자 종류를 캡슐화
  - 송신자 - 수신자 간 객체 타입에 대한 결합도 낮춤

### # 메시지를 따라라

**객체지향의 핵심, 메시지**

- 클라스는 표현의 수단
- 메시지가 핵심
- 객체간 메시지가 어떻게 흐를지, 협력 관계를 어떻게 구성할지가 핵심

**책임-주도 설계 다시 살펴보기**

- 책임 완수를 위해 협력하는 객체들을 이용해 시스템 설계하는 방법
  - 객체간 오가는 메시지 기반으로 역할, 책임 분배 및 협력 구성
  - 메시지가 수신자의 책임 결정

**What/Who 사이클**

- 책임 주도 설계의 핵심
  - 필요한 행위(메시지) 먼저 결정
  - 그 행위를 수행할 객체 결정
- 행위(메시지)를 먼저 결정하는 것을 통해서 객체의 인터페이스 발견

**묻지말고 시켜라**

- 선 메시지 결정 후 객체 선택
  - Tell Don’t Ask or 디미터의 법칙 (Law of Demeter)
  - 객체 지향의 장점 극대화
    - 캡슐화 증진
    - 결합도 감소

### # 객체 인터페이스

**인터페이스**

- 내부 동작 몰라도 사용 가능
- 내부 구성, 작동방식 변경해도 인터페이스 사용자에게 영향을 주지 않음
- 대상이 변경되어도 동일 인터페이스 제공시 상호작용 가능

### # 인터페이스와 구현의 분리

**객체 관점에서 생각하는 방법**

- 객체지향 사고 이해를 위한 원칙
  - 좀 더 추상적인 인터페이스
    - 세부 사항 제거
  - 최소 인터페이스
    - 외부 노출 최소화
  - 인터페이스와 구현간에 차이가 있다는 점을 인식
    - 구현
      -> 객체를 구성하지만, 공통 인터페이스에 포함되지 않는 것

**인터페이스와 구현의 분리 원칙**

- 분리하면 변경에 유연하게 대응할 수 있음.
- 객체가 가져야할 상태와 메서드 구현은 객체 내부에 속함
  - 구현을 변경하더라도 객체 외부에 영향을 미치면 안된다.
  - 객체 외부에 영향을 미치는 변경은 공용 인터페이스를 수정할 때 뿐.
- 객체가 인터페이스에 의존하게 만드는 것

**캡술화 (정보은닉)**

- 상태와 행위의 캡슐화 (데이터 캡슐화)
  - 상태는 스스로 관리
- 사적인 비밀의 캡슐화
  - 변경이 빈번한 것은 인터페이스 뒤로 숨김
    - 구현과 세부사항이 이에 해당
  - 객체는 공용 인터페이스를 경계로 최대한의 자율성을 보장 받을 수 있다.
  - 외부와 내부를 업격하게 분리

### # 책임의 자율성이 협력의 품질을 결정한다

==🔴*자율성을 강조하는 이유*==

```
어떤 협력이 다른 협력보다 이해하기 쉽고 변경에 유연하기 때문.
객체의 책임이 자율적일수록 협력이 이해하기 쉬워짐.
얼마나 책임이 자율적인지가 전체 협력의 설계 품질 좌우
```

1. 자율적인 책임은 협력을 단순하게 만든다.
2. 자율적인 책임은 객체의 외부와 내부를 명확하게 분리한다.
3. 책임이 자율적일 경우 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다.
4. 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다.
5. 객체가 수행하는 책임들이 자율적일수록 개체의 역할을 이해하기 쉬워진다.
