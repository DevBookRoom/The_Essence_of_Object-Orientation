# [객체지향의 사실과 오해 chap3]

#코딩/스터디

## 2. 타입과 추상화

### # 도입

- 불필요한 정보가 이해를 어렵게함.
- 추상화는 필요한 정보만 노출하기 위해 불필요한 정보를 제거하는 것임.
- 꼭 알아야 하는 정보만 표현, 몰라도 되는 정보 제거

### # 추상화를 통한 복잡성 극복

- 현실에서 출발하면서 불필요한 부분 제거하여 복잡성 극복
- 단순하게 만드는 것이 주된 목적

### # 객체지향과 추상화

1. 그룹 나누어 단순화 하기
   - 차이점 무시하고 공통점만으로 개념 단순화
   ```
   개념: 공통점을 기반으로 객체를 그룹화하기 위한 그릇
   분류: 개념을 기준으로 여러 그룹으로 나누는 것
   인스턴스: 개념으로 나눈 그룹의 일원이 되는 객체
   ```
2. 개념의 세 가지 관점
   1. 심볼: 이름
   2. 내연: 개념 (특징)
   3. 외연: 인스턴스 (예시)

### # 타입

1. 데이터 타입
   - 실제로는 바이너리인 데이터를 용도와 행동에 따라 분류 -> 타입 시스템이 생겨남
   - 타입은 데이터의 용도에 관한 것
2. 객체와 타입
   - 객체는 행위에 따라 변할 수 있는 상태를 가짐.
   - 상태는 행동의 결과를 쉽게 표현하기 위한 추상적 개념
   - 협력을 위해 어떤 책임을 지녀야 하는지 결정.
   - `동일 행동을 수행하는 객체 = 동일 타입`
   - `객체의 내부적인 표현은 외부로부터 철저히 감춰짐`
3. 행동이 우선이다
   - 객체의 행동에 따라 객체 타입 결정
   - 내부 표현 방식이 달라도 동일한 행동이라면 동일한 타입
     - `세부적인 구현이 다르더라도 인터페이스 명세가 같다면 같은 타입으로 본다.`
     - 내부 표현 방식이 다르면 동일한 메시지를 수신해도 처리하는 방식은 다를 수 밖에 없다.
       - **(다형성)** 동일한 요청에 대해 서로 다른 방식으로 응답하는 능력
       - 다형적 객체들은 동일한 타입에 속함
     - 내부 표현 방식과 무관하게 `행동만이 고려 대상`이라는 사실은 외부에 데이터를 감춰야한다는 걸 의미.
       - **(캡슐화)** 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춰야 한다.
       - 인터페이스(행동 명세)가 오염되지 않게 주의 필요
       - 외부로 제공해야 하는 행동을 먼저 고민 : `책임 주도 설계`
         1. 책임 먼저 결정
         2. 먼저 결정한 책임을 수행하는 데이터 결정

### # 타입의 계층

1. 일반화/특수화 관계
   - 엘리스가 정의한 건 실제 트럼프가 아닌, 트럼프 인간.
   - 따라서 일반적인 개념인 `트럼프`, 트럼프의 동작에서 더 확장된 개념인 `트럼프 인간`으로 나눌 수 있다.
   - 일반적인 개념인 트럼프는 트럼프 인간이던, 트럼프 강아지이던, 트럼프 고양이이던 상관없이 `트럼프에 관련된 최소한의 공통적 특성`을 가진다.
     - 더 특화된 (`구체적인`) 행동을 하는 트럼프 인간이나 트럼프 강아지보다 더 포괄적인 (`추상적인`) 개념

| 특징   | 타입     | 예시       | 추상/구체 |
| ------ | -------- | ---------- | --------- |
| 일반화 | 슈퍼타입 | 트럼프     | 추상적    |
| 특수화 | 서브타입 | 트럼프인간 | 구체적    |

2. 슈퍼 타입과 서브 타입

   - 두 타입간의 관계는 행동에 의해 결정됨.
   - 행위적 호환성이 만족해야 서브 타입이 될 수 있다.
   - **(SOLID 리스코프 치환 법칙)** 서브 타입은 언제나 기반타입으로 교체할 수 있어야한다.
     - 교체할 수 있다는건 슈퍼 타입의 인스턴스를 서브 타입의 인스턴스로 교체해도 의도대로 동작해야한다.
     - 다형성을 설명.

3. 일반화는 추상화를 위한 도구다.

   - 지금까지 언급한 내용을 코드로 표현해보면 아래와 같다.

   ```typescript
   interface Trump {
     납작_엎드리기(): void;
     뒤집어지기(): void;
   }

   class TrumpHuman implements Trump {
     constructor(private 자세: string) {
       this.자세 = "서있기";
     }

     납작_엎드리기() {
       this.자세 = "납작 엎드리기";
     }
     뒤집어지기() {
       this.자세 = "뒤집어지기";
     }
     걷기() {
       this.자세 = "걷기";
     }
   }
   ```

   - 추상화의 두번째 차원은 `중요한 부분을 강조하기 위해서 불필요한 세부 사항을 제거하여 단순화 하는 것`
   - 엘리스가 “저 킹과 퀸은 트럼프에 불과해” 라고 생각하면 사람처럼 걷는 행동은 빼고 트럼프의 특징은 `납작 엎드리기`와 `뒤집어지기`에만 집중한 것이다.
     - 이처럼 트럼프로 생각하기 위해 불필요한 특징인 `걷기`는 제거하여 더 단순하게 만들었다.

   ```typescript
   // 트럼프 킹과 퀸을 "트럼프 인간" 이라고 생각하기
   const trumpKing: TrumpHuman = new TrumpHuman("서있기");
   const trumpQueen: TrumpHuman = new TrumpHuman("서있기");

   // 트럼프 킹과 퀸을 "트럼프"라고 생각하기 - 일반화
   const trumpKing: Trump = new TrumpHuman("서있기");
   const trumpQueen: Trump = new TrumpHuman("서있기");
   ```

### # 정적 모델

1. 타입의 목적
   - 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어려움.
   - 키가 몇으로 변하는지보다 키가 변할 수 있다는 가능성만 생각하는 것이 더 단순함.
     - (동적) 키가 몇으로 변하는지 - 100cm, 3m … 매번 변경
     - (정적) 키가 변한다는 사실 - true 그냥 고정
2. 그래서 결국 타입은 추상화다.
   - 객체의 동적인 특성을 추상화할 수 있다.
