이번장의 주제 : 개별적인 객체의 행동이나 상태가 아니라 객체들 간의 협력에 집중하라.

어떤 협력에 참여하는지가 객체에 필요한 행동을 결정하고, 필요한 행동이 객체의 상태를 결정한다. 

## 협력

한 사람이 다른 사람에게 도움을 **요청**할 때 시작된다. 자신에게 할당된 일이나 업무를 처리하던 중에 스스로 해결하기 어려운 문제에 부딛히게 되면 문제를 해결하는데 필요한 지식을 알고 있거나 도움을 받을 수 있는 누군가에게 도움을 요청하게 된다.

요청을 받은 사람은 일을 처리한 후 요청한 사람에게 필요한 지식이나 서비스를 제공하는 것으로 요청에 **응답**한다.

**협력**은 다수의 요청과 응답으로 구성되며 전체적으로 협력은 다수의 연쇄적인 요청과 응답의 흐름으로 구성된다. 

 

## 책임

협력에 참여하는 객체들은 목표를 달성하는 데 필요한 책임을 수행한다.  

- 객체의 책임   = 객체가 무엇을 알고 있는가(knowing) + 객체가 무엇을 할 수 있는 가(doing)
- 하는 것(doing)
1. 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
2. 다른 객체의 행동을 시작시키는 것
3. 다른 객체의 활동을 제어하고 조절하는 것

- 아는 것(knowing)
1. 개인적인 정보에 관해 아는 것
2. 관련된 객체에 관해 아는 것
3. 자신이 유도하거나 계산할 수 있는 것에 대해 아는 것 

책임은 객체지향설계의 품질을 결정하는 중요한 요소. 

**객체지향 설계의 핵심은 적절한 객체에게 적절한 책임을 할당하는 것** 

책임은 객체의 외부에서 제공해 줄 수 있는 정보(아는 것의 측면)와 외부에 제공해 줄 수 있는 서비스(하는 것의 측면)의 목록이다. 

- 메시지 전송  : 한 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것

→ 협력에 참여하는 두 객체 사이의 관계를 강조 

→ 책임은 협력이란 문맥 속에서 요청을 수신하는 한 쪽의 객체 관점에서 무엇을 할 수 있는지 나열하는 것

- 책임 VS 메시지
1. 책임은 객체가 협력에 참여하기 위해 수행해야 하는 행위를 상위 수준에서 개략적으로 서술한 것
2. 책임을 결정 한 후 실제로 협력을 정제하면서 이를 메시지로 변활 할때 하나의 책임이 여러 메시지로 분할된다. 

## 역할

- 역할 : 객체가 수행하는 책임의 집합
- 역할의 중요성 : 객체지향 설계의 단순성, 유연성, 재사용성을 뒷받침하는 핵심 개념이다.

| 협력 | 객체 | 책임 | 역할 (role) |
| --- | --- | --- | --- |
| 재판 | 왕,여왕 | **증인 부를 것 요청한다.**
국정을 운영한다. | 판사
국왕 |
|  | 앨리스  | **증인석에 입장하다.
증언하다.**
주인공의 역할을 수행한다.  | 증인
주인공 |
|  | 모자장수 | **증인석에 입장하다.
증언하다.**
모자를 판매한다. | 증인
모자장수
 |
|  | 요리사 | **증인석에 입장하다.
증언하다.**
요리하다 .  | 증인
요리사 |
- 협력에 참여하는 등장인물들을 제외한 과정이 유사하다. 띠라서 역할을 이용해서 협력(관계)를 추상화 할 수 있다.
- 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식이다.→ 대체가능성
- 역할을 대체할 수 있는 객체는 동일한 메시지를 이해할 수 있는 객체로 한정된다.
- 객체는 역할이 암시하는 책임보다 더 많은 책임을 가질 수 있다.→ 일반화/특수화 관계

## 객체의 모양을 결정하는 협력

- 객체지향 설계 순서
1. 협력을 설계 : 객체들의 주고 받을 요청과 응답의 흐름을 결정 (= 책임)
2. 객체에 책임을 할당  : 이때 책임은 외부에 드러나는 객체의 행동이 된다.
3. 책임 수행에 필요한 객체를 선택 
4. 객체가 필요로 하는 데이터 정의
5. 개별 객체를 구현한 클래스 개발 

## 객체지향 설계 기법

### 책임-주도 설계

→ 객체의 역할, 책임, 협력을 고안하기 위한 방법과 절체 제시

- 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
- 시스템 책임을 더 작은 책임으로 분할한다.
- 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
- 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적잘한 객체 또는 역할을 찾는다.
- 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

### 디자인패턴

→ 책임-주도 설계의 결과를 표현 
→ 패턴은 해결하려고 하는 문제가 무엇인지 명확히 서술하고, 패턴을 적용할 수 있는 상황과 적용할 수 없는 상황을 함께 설명 

→ 패턴은 반복해서 일어나는 특정한 상황에서 어떤 설계가 왜(WHY) 더 효과적인지에 대한 이유를 설명

### 테스트-주도 개발

테스트를 먼저 작성하고 테스트를 통과하는 구체적인 코드를  추가하면서 애플리케이션을 완성해가는 방식
